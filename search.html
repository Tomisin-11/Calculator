<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCal - Search Mode</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23000' width='100' height='100'/><text y='70' x='50' text-anchor='middle' font-size='45' font-weight='900' fill='%23fff'>TC</text></svg>">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #000; color: #fff; min-height: 100vh; padding-bottom: 120px; }
        
        .navbar { position: fixed; top: 0; left: 0; right: 0; height: 70px; background: rgba(0,0,0,0.95); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: space-between; padding: 0 40px; z-index: 1000; }
        .logo { font-size: 32px; font-weight: 800; background: linear-gradient(135deg, #fff 0%, #888 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: -2px; cursor: pointer; }
        .nav-links { display: flex; gap: 20px; }
        .nav-link { color: #888; text-decoration: none; font-weight: 600; font-size: 14px; padding: 10px 20px; border-radius: 8px; transition: all 0.3s; }
        .nav-link:hover { color: #fff; background: rgba(255,255,255,0.1); }
        
        .hamburger { display: none; flex-direction: column; gap: 5px; cursor: pointer; padding: 10px; }
        .hamburger span { width: 25px; height: 3px; background: #fff; border-radius: 2px; transition: all 0.3s; }
        
        .mobile-menu { position: fixed; top: 70px; right: -100%; width: 250px; height: calc(100vh - 70px); background: rgba(0,0,0,0.98); border-left: 1px solid rgba(255,255,255,0.1); transition: right 0.3s; z-index: 999; padding: 20px; }
        .mobile-menu.active { right: 0; }
        .mobile-menu .nav-link { display: block; margin: 10px 0; }
        
        .container { margin-top: 100px; padding: 40px 20px; max-width: 1400px; margin-left: auto; margin-right: auto; }
        
        .mode-btns { display: flex; gap: 12px; margin-bottom: 30px; flex-wrap: wrap; }
        .mode-btn { flex: 1; min-width: 140px; padding: 12px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: #888; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 14px; }
        .mode-btn:hover { background: rgba(255,255,255,0.08); }
        .mode-btn.calc { background: rgba(0,255,136,0.15); border-color: rgba(0,255,136,0.3); color: #00ff88; }
        .mode-btn.study { background: rgba(255,136,0,0.15); border-color: rgba(255,136,0,0.3); color: #f80; }
        
        .page-header h1 { font-size: 42px; margin-bottom: 10px; background: linear-gradient(135deg, #fff 0%, #888 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .page-header p { color: #888; margin-bottom: 30px; font-size: 16px; }
        
        /* Results Area - Now at top */
        .results-area { background: rgba(0,0,0,0.3); border-radius: 20px; padding: 30px; margin-bottom: 30px; border: 1px solid rgba(255,255,255,0.1); display: none; }
        .results-area.active { display: block; animation: fadeIn 0.4s; }
        .results-title { font-size: 24px; font-weight: 700; margin-bottom: 20px; }
        .results-content { color: rgba(255,255,255,0.9); line-height: 2; font-size: 16px; }
        
        /* Video Section */
        .video-section { margin-top: 30px; padding-top: 30px; border-top: 1px solid rgba(255,255,255,0.1); }
        .video-section h3 { font-size: 20px; margin-bottom: 16px; }
        .video-card { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 16px; margin: 12px 0; display: flex; gap: 16px; cursor: pointer; transition: all 0.3s; }
        .video-card:hover { background: rgba(255,255,255,0.08); border-color: rgba(0,255,136,0.3); transform: translateY(-2px); }
        .video-thumb { width: 160px; height: 90px; background: linear-gradient(135deg, rgba(99,102,241,0.3), rgba(139,92,246,0.3)); border-radius: 8px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 32px; }
        .video-info h4 { font-size: 14px; color: #fff; margin-bottom: 8px; }
        .video-info p { color: #888; font-size: 12px; margin-bottom: 8px; }
        .video-info a { color: #00ff88; text-decoration: none; font-size: 13px; font-weight: 600; }
        
        /* Subject Selector */
        .subject-selector { display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin-bottom: 20px; }
        .section-divider { width: 100%; text-align: center; margin: 20px 0 16px 0; }
        .section-label { color: #666; font-size: 13px; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; }
        .subject-chip { padding: 10px 24px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 100px; color: #888; cursor: pointer; transition: all 0.3s; font-size: 14px; font-weight: 600; }
        .subject-chip:hover { border-color: rgba(255,255,255,0.3); transform: translateY(-2px); }
        .subject-chip.active { background: #fff; color: #000; border-color: #fff; }
        
        /* Topic Section */
        .topic-section { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 20px; margin-bottom: 30px; display: none; }
        .topic-section.show { display: block; }
        .topic-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
        .topic-search { flex: 1; padding: 12px 16px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: #fff; font-size: 14px; }
        .topic-search:focus { outline: none; border-color: rgba(255,255,255,0.3); }
        .topic-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 12px; }
        .topic-item { padding: 12px 16px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; text-align: center; cursor: pointer; transition: all 0.3s; font-size: 13px; font-weight: 600; color: #888; }
        .topic-item:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.3); }
        .topic-item.active { background: rgba(0,255,136,0.2); border-color: #00ff88; color: #00ff88; }
        .selected-topic-badge { background: rgba(0,255,136,0.2); color: #00ff88; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 700; }
        
        /* More Subjects Dropdown */
        .more-subjects-container { width: 100%; margin-top: 20px; }
        .more-btn { width: 100%; padding: 14px 24px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: #888; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .more-btn:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.3); color: #fff; }
        .more-subjects-dropdown { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; margin-top: 16px; }
        .more-subjects-dropdown.show { max-height: 3000px; }
        
        /* Category Sections in Dropdown */
        .dropdown-section { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 16px; margin-bottom: 16px; }
        .dropdown-header { display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px; user-select: none; }
        .dropdown-header:hover { opacity: 0.8; }
        .dropdown-icon { font-size: 18px; }
        .dropdown-label { font-size: 13px; font-weight: 700; color: #666; text-transform: uppercase; letter-spacing: 1.2px; flex: 1; }
        .dropdown-arrow { color: #666; transition: transform 0.3s; font-size: 12px; }
        .dropdown-arrow.open { transform: rotate(180deg); }
        .dropdown-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .dropdown-content.open { max-height: 800px; overflow-y: auto; margin-top: 12px; }
        .dropdown-content::-webkit-scrollbar { width: 6px; }
        .dropdown-content::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }
        .dropdown-section .subject-chip { margin: 6px; display: inline-block; }
        
        /* Fixed Search Input at Bottom */
       /* Fixed at bottom */
.search-input-fixed {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0,0,0,0.98);
  backdrop-filter: blur(20px);
  border-top: 1px solid rgba(255,255,255,0.1);
  padding: 16px 20px;
  z-index: 999;
}

/* Center container */
.search-input-container {
  max-width: 1200px;
  margin: 0 auto;
}

/* Wrapper for input + button */
.search-input-wrapper {
  position: relative;
  width: 100%;
}

/* Input */
.search-input {
  width: 100%;
  padding: 14px 60px 14px 20px;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 30px;
  color: #fff;
  font-size: 15px;
}

.search-input::placeholder {
  color: rgba(255,255,255,0.4);
}

.search-input:focus {
  outline: none;
  border-color: rgba(255,255,255,0.4);
  background: rgba(255,255,255,0.08);
}

/* Button INSIDE input */
.search-btn.inside {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  border: none;
  border-radius: 50%;
  color: #fff;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.25s ease;
}

.search-btn.inside:hover {
  transform: translateY(-50%) scale(1.1);
  box-shadow: 0 8px 24px rgba(99,102,241,0.5);
}

        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (max-width: 768px) {
            .navbar { padding: 0 20px; }
            .nav-links { display: none; }
            .hamburger { display: flex; }
            .container { padding: 20px; }
            .page-header h1 { font-size: 32px; }
            .video-card { flex-direction: column; }
            .video-thumb { width: 100%; height: 180px; }
            .search-input-fixed { padding: 12px; }
            .search-input-container { flex-direction: column; }
            .search-btn { 
            width: 48px; 
            height: 48px; 
            padding: 0; 
            background: linear-gradient(135deg, #6366f1, #8b5cf6); 
            border: none; 
            border-radius: 50%; 
            color: #fff; 
            cursor: pointer; 
            transition: all 0.3s; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            flex-shrink: 0;
        }
        }
    
        
        /* Comprehensive Responsive Design */
        @media (max-width: 1200px) {
            .container { max-width: 100%; padding: 40px 16px; }
        }
        
        @media (max-width: 768px) {
            .navbar { padding: 0 20px; }
            .logo { font-size: 24px; }
            .nav-links { display: none; }
            .hamburger { display: flex; }
            
            .container { margin-top: 90px; padding: 20px 16px; }
            .page-header h1 { font-size: 32px; }
            .page-header p { font-size: 14px; }
            
            .mode-btns { gap: 8px; }
            .mode-btn { min-width: 100px; padding: 10px 16px; font-size: 13px; }
            
            .results-area { padding: 20px; }
            .results-title { font-size: 20px; }
            .results-content { font-size: 15px; line-height: 1.8; }
            
            .video-card { flex-direction: column; }
            .video-thumb { width: 100%; height: 180px; }
            
            .subject-chip { padding: 8px 16px; font-size: 13px; }
            .section-label { font-size: 12px; }
            
            .topic-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
            .topic-item { padding: 10px 12px; font-size: 12px; }
            
            .search-input-fixed { padding: 16px; }
            .search-input { padding: 12px 16px; font-size: 14px; }
            .search-btn { width: 42px; height: 42px; }
        }
        
        @media (max-width: 480px) {
            .logo { font-size: 20px; }
            .navbar { padding: 0 16px; height: 60px; }
            
            .container { margin-top: 80px; padding: 16px 12px; }
            .page-header h1 { font-size: 28px; }
            
            .mode-btns { flex-direction: column; }
            .mode-btn { width: 100%; min-width: auto; }
            
            .results-area { padding: 16px; }
            .results-title { font-size: 18px; }
            
            .subject-selector { gap: 8px; }
            .subject-chip { padding: 6px 12px; font-size: 12px; }
            
            .topic-grid { grid-template-columns: 1fr; }
            
            .search-input-fixed { padding: 12px; }
            .search-input-container { flex-wrap: wrap; }
            .search-input { width: 100%; margin-bottom: 8px; }
            .search-btn { width: 40px; height: 40px; }
        }

       @media (max-width: 480px) {
  .search-input-fixed {
    padding: 12px;
  }

  .search-input {
    padding: 12px 52px 12px 16px;
    font-size: 14px;
  }

  .search-btn.inside {
    width: 38px;
    height: 38px;
  }
}


    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">TCal</div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="calculator-full.html" class="nav-link">Calculator</a>
            <a href="study.html" class="nav-link">Study</a>
        </div>
        <div class="hamburger" onclick="toggleMobileMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="mobile-menu" id="mobileMenu">
        <a href="index.html" class="nav-link">Home</a>
        <a href="calculator-full.html" class="nav-link">Calculator</a>
        <a href="study.html" class="nav-link">Study</a>
    </div>

    <div class="container">
        <div class="mode-btns">
            <button class="mode-btn calc" onclick="window.location.href='calculator-full.html'">üßÆ Calculator</button>
            <button class="mode-btn">üîç Search</button>
            <button class="mode-btn study" onclick="window.location.href='study.html'">üìö Study</button>
        </div>

        <div class="page-header">
            <h1>AI Search</h1>
            <p>Search any topic and get detailed explanations with video tutorials</p>
        </div>

        <!-- Results Area (Now at Top) -->
        <div class="results-area" id="resultsArea">
            <div class="results-title">AI Answer</div>
            <div id="resultsContent" class="results-content"></div>
            
            <div class="video-section" id="videoSection" style="display: none;">
                <h3>üì∫ Related YouTube Videos</h3>
                <div id="videoList"></div>
            </div>
        </div>

        <!-- Subject Selector -->
        <div class="subject-selector">
            <div class="section-divider" style="margin-top: 0;">
                <span class="section-label">Core Subjects</span>
            </div>
            <div class="subject-chip" onclick="selectSubject('Mathematics')">Mathematics</div>
            <div class="subject-chip" onclick="selectSubject('Physics')">Physics</div>
            <div class="subject-chip" onclick="selectSubject('Chemistry')">Chemistry</div>
            <div class="subject-chip" onclick="selectSubject('Biology')">Biology</div>
            <div class="subject-chip" onclick="selectSubject('Statistics')">Statistics</div>
            <div class="subject-chip" onclick="selectSubject('English')">English</div>
            <div class="subject-chip" onclick="selectSubject('History')">History</div>
            <div class="subject-chip" onclick="selectSubject('Geography')">Geography</div>
            
            <div class="section-divider">
                <span class="section-label">Advanced Courses</span>
            </div>
            <div class="subject-chip" onclick="selectSubject('Calculus')">Calculus</div>
            <div class="subject-chip" onclick="selectSubject('Linear Algebra')">Linear Algebra</div>
            <div class="subject-chip" onclick="selectSubject('Differential Equations')">Differential Equations</div>
            <div class="subject-chip" onclick="selectSubject('Thermodynamics')">Thermodynamics</div>
            <div class="subject-chip" onclick="selectSubject('Organic Chemistry')">Organic Chemistry</div>
            <div class="subject-chip" onclick="selectSubject('Quantum Mechanics')">Quantum Mechanics</div>
            <div class="subject-chip" onclick="selectSubject('Engineering')">Engineering</div>
            <div class="subject-chip" onclick="selectSubject('Computer Science')">Computer Science</div>
            
            <!-- More Subjects Dropdown -->
            <div class="more-subjects-container">
                <button class="more-btn" onclick="toggleMoreSubjects()">
                    <span id="moreSubjectsText">‚ûï More Subjects (150+)</span>
                </button>
                <div class="more-subjects-dropdown" id="moreSubjectsDropdown">
                    <!-- Natural Sciences -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('naturalSciences')">
                            <span class="dropdown-icon">üî¨</span>
                            <span class="dropdown-label">Natural Sciences</span>
                            <span class="dropdown-arrow" id="arrow-naturalSciences">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="naturalSciences">
                            <div class="subject-chip" onclick="selectSubject('Astronomy')">Astronomy</div>
                            <div class="subject-chip" onclick="selectSubject('Geology')">Geology</div>
                            <div class="subject-chip" onclick="selectSubject('Environmental Science')">Environmental Science</div>
                            <div class="subject-chip" onclick="selectSubject('Biochemistry')">Biochemistry</div>
                            <div class="subject-chip" onclick="selectSubject('Microbiology')">Microbiology</div>
                            <div class="subject-chip" onclick="selectSubject('Genetics')">Genetics</div>
                            <div class="subject-chip" onclick="selectSubject('Neuroscience')">Neuroscience</div>
                            <div class="subject-chip" onclick="selectSubject('Ecology')">Ecology</div>
                            <div class="subject-chip" onclick="selectSubject('Botany')">Botany</div>
                            <div class="subject-chip" onclick="selectSubject('Zoology')">Zoology</div>
                            <div class="subject-chip" onclick="selectSubject('Marine Biology')">Marine Biology</div>
                            <div class="subject-chip" onclick="selectSubject('Meteorology')">Meteorology</div>
                            <div class="subject-chip" onclick="selectSubject('Oceanography')">Oceanography</div>
                            <div class="subject-chip" onclick="selectSubject('Paleontology')">Paleontology</div>
                            <div class="subject-chip" onclick="selectSubject('Biophysics')">Biophysics</div>
                        </div>
                    </div>

                    <!-- Mathematics & Logic -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('mathLogic')">
                            <span class="dropdown-icon">üìê</span>
                            <span class="dropdown-label">Mathematics & Logic</span>
                            <span class="dropdown-arrow" id="arrow-mathLogic">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="mathLogic">
                            <div class="subject-chip" onclick="selectSubject('Discrete Mathematics')">Discrete Mathematics</div>
                            <div class="subject-chip" onclick="selectSubject('Number Theory')">Number Theory</div>
                            <div class="subject-chip" onclick="selectSubject('Abstract Algebra')">Abstract Algebra</div>
                            <div class="subject-chip" onclick="selectSubject('Real Analysis')">Real Analysis</div>
                            <div class="subject-chip" onclick="selectSubject('Complex Analysis')">Complex Analysis</div>
                            <div class="subject-chip" onclick="selectSubject('Topology')">Topology</div>
                            <div class="subject-chip" onclick="selectSubject('Probability Theory')">Probability Theory</div>
                            <div class="subject-chip" onclick="selectSubject('Combinatorics')">Combinatorics</div>
                            <div class="subject-chip" onclick="selectSubject('Game Theory')">Game Theory</div>
                            <div class="subject-chip" onclick="selectSubject('Set Theory')">Set Theory</div>
                            <div class="subject-chip" onclick="selectSubject('Logic')">Logic</div>
                            <div class="subject-chip" onclick="selectSubject('Geometry')">Geometry</div>
                            <div class="subject-chip" onclick="selectSubject('Trigonometry')">Trigonometry</div>
                            <div class="subject-chip" onclick="selectSubject('Applied Mathematics')">Applied Mathematics</div>
                        </div>
                    </div>

                    <!-- Computer Science & Technology -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('compSci')">
                            <span class="dropdown-icon">üíª</span>
                            <span class="dropdown-label">Computer Science & Technology</span>
                            <span class="dropdown-arrow" id="arrow-compSci">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="compSci">
                            <div class="subject-chip" onclick="selectSubject('Data Science')">Data Science</div>
                            <div class="subject-chip" onclick="selectSubject('Machine Learning')">Machine Learning</div>
                            <div class="subject-chip" onclick="selectSubject('Artificial Intelligence')">Artificial Intelligence</div>
                            <div class="subject-chip" onclick="selectSubject('Deep Learning')">Deep Learning</div>
                            <div class="subject-chip" onclick="selectSubject('Algorithms')">Algorithms</div>
                            <div class="subject-chip" onclick="selectSubject('Database Systems')">Database Systems</div>
                            <div class="subject-chip" onclick="selectSubject('Operating Systems')">Operating Systems</div>
                            <div class="subject-chip" onclick="selectSubject('Computer Networks')">Computer Networks</div>
                            <div class="subject-chip" onclick="selectSubject('Cybersecurity')">Cybersecurity</div>
                            <div class="subject-chip" onclick="selectSubject('Cryptography')">Cryptography</div>
                            <div class="subject-chip" onclick="selectSubject('Cloud Computing')">Cloud Computing</div>
                            <div class="subject-chip" onclick="selectSubject('Web Development')">Web Development</div>
                            <div class="subject-chip" onclick="selectSubject('Mobile Development')">Mobile Development</div>
                            <div class="subject-chip" onclick="selectSubject('Computer Graphics')">Computer Graphics</div>
                            <div class="subject-chip" onclick="selectSubject('Blockchain')">Blockchain</div>
                            <div class="subject-chip" onclick="selectSubject('IoT')">Internet of Things</div>
                        </div>
                    </div>

                    <!-- Engineering -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('engineering')">
                            <span class="dropdown-icon">‚öôÔ∏è</span>
                            <span class="dropdown-label">Engineering</span>
                            <span class="dropdown-arrow" id="arrow-engineering">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="engineering">
                            <div class="subject-chip" onclick="selectSubject('Mechanical Engineering')">Mechanical Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Electrical Engineering')">Electrical Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Civil Engineering')">Civil Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Chemical Engineering')">Chemical Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Aerospace Engineering')">Aerospace Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Software Engineering')">Software Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Biomedical Engineering')">Biomedical Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Industrial Engineering')">Industrial Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Materials Engineering')">Materials Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Environmental Engineering')">Environmental Engineering</div>
                            <div class="subject-chip" onclick="selectSubject('Robotics')">Robotics</div>
                            <div class="subject-chip" onclick="selectSubject('Mechatronics')">Mechatronics</div>
                        </div>
                    </div>

                    <!-- Social Sciences -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('socialSci')">
                            <span class="dropdown-icon">üë•</span>
                            <span class="dropdown-label">Social Sciences</span>
                            <span class="dropdown-arrow" id="arrow-socialSci">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="socialSci">
                            <div class="subject-chip" onclick="selectSubject('Psychology')">Psychology</div>
                            <div class="subject-chip" onclick="selectSubject('Sociology')">Sociology</div>
                            <div class="subject-chip" onclick="selectSubject('Economics')">Economics</div>
                            <div class="subject-chip" onclick="selectSubject('Political Science')">Political Science</div>
                            <div class="subject-chip" onclick="selectSubject('Anthropology')">Anthropology</div>
                            <div class="subject-chip" onclick="selectSubject('Philosophy')">Philosophy</div>
                            <div class="subject-chip" onclick="selectSubject('Criminology')">Criminology</div>
                            <div class="subject-chip" onclick="selectSubject('Social Work')">Social Work</div>
                        </div>
                    </div>

                    <!-- Business & Law -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('business')">
                            <span class="dropdown-icon">üíº</span>
                            <span class="dropdown-label">Business & Law</span>
                            <span class="dropdown-arrow" id="arrow-business">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="business">
                            <div class="subject-chip" onclick="selectSubject('Business Administration')">Business Administration</div>
                            <div class="subject-chip" onclick="selectSubject('Accounting')">Accounting</div>
                            <div class="subject-chip" onclick="selectSubject('Finance')">Finance</div>
                            <div class="subject-chip" onclick="selectSubject('Marketing')">Marketing</div>
                            <div class="subject-chip" onclick="selectSubject('Management')">Management</div>
                            <div class="subject-chip" onclick="selectSubject('Entrepreneurship')">Entrepreneurship</div>
                            <div class="subject-chip" onclick="selectSubject('Law')">Law</div>
                            <div class="subject-chip" onclick="selectSubject('Corporate Law')">Corporate Law</div>
                            <div class="subject-chip" onclick="selectSubject('International Business')">International Business</div>
                        </div>
                    </div>

                    <!-- Health & Medicine -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('health')">
                            <span class="dropdown-icon">üè•</span>
                            <span class="dropdown-label">Health & Medicine</span>
                            <span class="dropdown-arrow" id="arrow-health">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="health">
                            <div class="subject-chip" onclick="selectSubject('Anatomy')">Anatomy</div>
                            <div class="subject-chip" onclick="selectSubject('Physiology')">Physiology</div>
                            <div class="subject-chip" onclick="selectSubject('Pharmacology')">Pharmacology</div>
                            <div class="subject-chip" onclick="selectSubject('Medicine')">Medicine</div>
                            <div class="subject-chip" onclick="selectSubject('Nursing')">Nursing</div>
                            <div class="subject-chip" onclick="selectSubject('Public Health')">Public Health</div>
                            <div class="subject-chip" onclick="selectSubject('Epidemiology')">Epidemiology</div>
                            <div class="subject-chip" onclick="selectSubject('Nutrition')">Nutrition</div>
                        </div>
                    </div>

                    <!-- Arts & Humanities -->
                    <div class="dropdown-section">
                        <div class="dropdown-header" onclick="toggleDropdown('arts')">
                            <span class="dropdown-icon">üé®</span>
                            <span class="dropdown-label">Arts & Humanities</span>
                            <span class="dropdown-arrow" id="arrow-arts">‚ñº</span>
                        </div>
                        <div class="dropdown-content" id="arts">
                            <div class="subject-chip" onclick="selectSubject('Literature')">Literature</div>
                            <div class="subject-chip" onclick="selectSubject('Art History')">Art History</div>
                            <div class="subject-chip" onclick="selectSubject('Music Theory')">Music Theory</div>
                            <div class="subject-chip" onclick="selectSubject('Languages')">Languages</div>
                            <div class="subject-chip" onclick="selectSubject('Creative Writing')">Creative Writing</div>
                            <div class="subject-chip" onclick="selectSubject('Film Studies')">Film Studies</div>
                            <div class="subject-chip" onclick="selectSubject('Theater Arts')">Theater Arts</div>
                            <div class="subject-chip" onclick="selectSubject('Linguistics')">Linguistics</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Topic Selection Section -->
        <div class="topic-section" id="topicSection">
            <div class="topic-header">
                <input type="text" id="topicSearch" class="topic-search" placeholder="Search topics..." onkeyup="filterTopics()">
                <span id="selectedTopicBadge"></span>
            </div>
            <div class="topic-grid" id="topicGrid"></div>
        </div>
    </div>

    <!-- Fixed Search Input at Bottom -->
  <div class="search-input-fixed">
  <div class="search-input-container">
    <div class="search-input-wrapper">
      <input
        type="text"
        class="search-input"
        id="searchInput"
        placeholder="Ask anything..."
      />

      <button
        class="search-btn inside"
        onclick="performSearch()"
        title="Search"
      >
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2.5"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </button>
    </div>
  </div>
</div>



   <!-- ONLY SCRIPT PART CHANGED ‚Äî YOUR HTML/CSS REMAIN SAME -->
<!-- Replace ONLY your <script>...</script> with this one -->

<script>
const apiKey = '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';

let currentSubject = '';
let currentTopic = '';

const subjectTopics = {
    'Mathematics': ['Algebra','Geometry','Trigonometry','Pre-Calculus','Number Theory'],
    'Physics': ['Mechanics','Kinematics','Dynamics','Energy & Work','Momentum','Thermodynamics'],
    'Chemistry': ['Atomic Structure','Periodic Table','Chemical Bonding','Stoichiometry'],
    'Biology': ['Cell Biology','Genetics','Evolution','Ecology'],
    'Statistics': ['Descriptive Statistics','Probability','Regression'],
    'Calculus': ['Limits','Derivatives','Integration'],
    'Computer Science': ['Algorithms','Programming','Databases','AI','Web Development']
};

window.addEventListener('load', loadSavedState);

function toggleMobileMenu(){
 document.getElementById('mobileMenu').classList.toggle('active');
}

function toggleMoreSubjects(){
 const dropdown=document.getElementById('moreSubjectsDropdown');
 const text=document.getElementById('moreSubjectsText');
 dropdown.classList.toggle('show');
 text.textContent=dropdown.classList.contains('show')
  ?'‚ûñ Hide Subjects':'‚ûï More Subjects (150+)';
}

function toggleDropdown(id){
 const content=document.getElementById(id);
 const arrow=document.getElementById(`arrow-${id}`);
 content.classList.toggle('open');
 arrow.classList.toggle('open');
}

/* ‚≠ê MAIN UPGRADED FUNCTION */
function selectSubject(subject){

 currentSubject=subject;
 currentTopic='';

 document.querySelectorAll('.subject-chip')
  .forEach(chip=>chip.classList.remove('active'));

 event.target.classList.add('active');

 /* activate search mode button visually */
 document.querySelectorAll('.mode-btn')
  .forEach(btn=>btn.classList.remove('study','calc'));

 /* show topic search */
 const topicSection=document.getElementById('topicSection');
 topicSection.classList.add('show');

 populateTopics();
 saveState();

 /* autofill AI search input */
 document.getElementById('searchInput').value=subject+" ";

 /* smooth scroll */
 topicSection.scrollIntoView({
  behavior:"smooth",
  block:"start"
 });

 /* focus topic search */
 setTimeout(()=>{
  document.getElementById('topicSearch').focus();
 },300);
}

function populateTopics(){
 const topicGrid=document.getElementById('topicGrid');
 const topics=subjectTopics[currentSubject]||[];

 topicGrid.innerHTML=topics.map(topic=>
 `<div class="topic-item"
 onclick="selectTopic('${topic}')">${topic}</div>`
 ).join('');

 document.getElementById('topicSearch').value='';
 document.getElementById('selectedTopicBadge').innerHTML='';
}

function selectTopic(topic){
 currentTopic=topic;

 document.querySelectorAll('.topic-item')
  .forEach(item=>item.classList.remove('active'));

 event.target.classList.add('active');

 document.getElementById('selectedTopicBadge').innerHTML=
 `<span class="selected-topic-badge">${topic}</span>`;

 /* autofill main search */
 document.getElementById('searchInput').value=
 `${currentSubject} ${topic} `;

 document.getElementById('searchInput').focus();

 saveState();
}

function filterTopics(){
 const searchTerm=document.getElementById('topicSearch')
  .value.toLowerCase();

 document.querySelectorAll('.topic-item')
 .forEach(item=>{
  item.style.display=item.textContent
   .toLowerCase()
   .includes(searchTerm)?'block':'none';
 });
}

async function performSearch(){

 const query=document.getElementById('searchInput')
  .value.trim();

 if(!query){
  alert('Please enter a question!');
  return;
 }

 const resultsArea=document.getElementById('resultsArea');
 const resultsContent=document.getElementById('resultsContent');

 resultsArea.classList.add('active');
 resultsContent.innerHTML=
 '<p style="color:#888;">Searching...</p>';

 window.scrollTo({top:0,behavior:'smooth'});

 try{

  const topicContext=currentTopic
   ?`Focus on ${currentTopic} in ${currentSubject}.`
   :'';

  const response=await fetch(
   "https://api.groq.com/openai/v1/chat/completions",
  {
   method:"POST",
   headers:{
    "Content-Type":"application/json",
    "Authorization":`Bearer ${apiKey}`
   },
   body:JSON.stringify({
    model:"llama-3.3-70b-versatile",
    messages:[{
     role:"user",
     content:`${topicContext}
Answer with detailed explanations:
${query}`
    }],
    temperature:0.7,
    max_tokens:2000
   })
  });

  const data=await response.json();
  const answer=data.choices[0].message.content;

  resultsContent.innerHTML=
   answer.replace(/\n/g,'<br>');

  displayYouTubeVideos(query);
  saveState();

 }catch(error){
  resultsContent.innerHTML=
   '<p style="color:#ff6666;">Error. Please try again.</p>';
 }
}

function displayYouTubeVideos(query){

 const videoSection=document.getElementById('videoSection');
 const videoList=document.getElementById('videoList');

 const searchQuery=encodeURIComponent(
  query+' tutorial explanation'
 );

 const videos=[
  {title:`${query} - Complete Tutorial`,channel:'Educational Content'},
  {title:`${query} Explained Simply`,channel:'Learning Channel'},
  {title:`${query} Step by Step`,channel:'Tutorial Hub'}
 ];

 videoList.innerHTML=videos.map(video=>`
 <div class="video-card"
 onclick="window.open(
 'https://www.youtube.com/results?search_query=${searchQuery}',
 '_blank')">
  <div class="video-thumb">‚ñ∂Ô∏è</div>
  <div class="video-info">
   <h4>${video.title}</h4>
   <p>${video.channel}</p>
   <a href="#">Watch on YouTube ‚Üí</a>
  </div>
 </div>
 `).join('');

 videoSection.style.display='block';
}

function saveState(){
 localStorage.setItem('searchState',JSON.stringify({
  subject:currentSubject,
  topic:currentTopic,
  query:document.getElementById('searchInput').value
 }));
}

function loadSavedState(){
 const saved=localStorage.getItem('searchState');
 if(saved){
  const state=JSON.parse(saved);
  currentSubject=state.subject;
  currentTopic=state.topic;
  if(state.query){
   document.getElementById('searchInput').value=state.query;
  }
 }
}

document.getElementById('searchInput')
.addEventListener('keypress',function(e){
 if(e.key==='Enter')performSearch();
});
</script>

</body>
</html>
